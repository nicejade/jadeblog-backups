<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"><title>Gulp探究折腾之路(I) | 晚晴幽草轩</title><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="author" content="晚晴幽草轩轩主"><meta name="theme-color" content="#fffffb"><meta name="baidu-site-verification" content="PKEtLPjO56"><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com/"><meta name="description" content="细说Gulp常用插件：gulp-jshint,gulp-uglify，gulp-minify-css等等;"><meta property="og:type" content="article"><meta property="og:title" content="Gulp探究折腾之路(I)"><meta property="og:url" content="https://www.jeffjade.com/2015/11/25/2015-11-25-toss-gulp/index.html"><meta property="og:site_name" content="晚晴幽草轩"><meta property="og:description" content="细说Gulp常用插件：gulp-jshint,gulp-uglify，gulp-minify-css等等;"><meta property="og:image" content="https://www.jeffjade.com//image.nicelinks.site/loveFlower.jpg"><meta property="og:updated_time" content="2017-09-01T12:58:14.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Gulp探究折腾之路(I)"><meta name="twitter:description" content="细说Gulp常用插件：gulp-jshint,gulp-uglify，gulp-minify-css等等;"><meta name="twitter:image" content="https://www.jeffjade.com//image.nicelinks.site/loveFlower.jpg"><meta name="twitter:creator" content="@nicejadeyang"><link rel="alternative" href="/atom.xml" title="晚晴幽草轩" type="application/atom+xml"><link rel="icon" href="/favicons/favicon.ico"><link rel="apple-touch-icon" href="/favicons/favicon.ico"><link rel="apple-touch-icon-precomposed" href="/favicons/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png"><link rel="manifest" href="/manifest.json"><link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#009ad6"><link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" media="screen"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><link href="https://cdn.webfont.youziku.com/webfonts/nomal/106962/46931/5d0fa119f629d800fcbb4e49.css" rel="stylesheet" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><link rel="stylesheet" href="/css/style.css?190623"><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" as="script"><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/bootcdn/BootCDN/ajax/libs/echo.js/1.7.3/echo.min.js" as="script"><link rel="prefetch" href="//tjs.sjs.sinajs.cn/open/api/js/wb.js" as="script"><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8586652723015758",enable_page_level_ads:!0})</script></head></html><body><header><div><div id="textlogo"><h1 class="site-name"><a href="/" title="晚晴幽草轩"></a></h1><h2 class="blog-motto">It&#39;s only too late if you decide it is. Get busy living. or get busy dying!</h2></div><div class="navbar"><a class="navbutton navmobile" href="#" title="云轩菜单"></a></div><nav class="animated"><ul><ul><li><a href="/" class="">Home</a></li><li><a href="/nicelinks" class="">Links</a></li><li><a href="https://nicelinks.site?utm_source=jeffjade.com" class="special">NiceLinks</a></li><li><a href="/archives" class="">Archives</a></li><li><a href="/about-me" class="">About</a></li><li><form class="search" action="//google.com/search" method="get" accept-charset="utf-8"><label>Search</label> <input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search"> <input type="hidden" name="q" value="site:www.jeffjade.com"></form></li></ul></ul></nav></div></header><div id="container"><div id="main" class="post" itemscope itemprop="blogPost"><article itemprop="articleBody"><header class="article-info clearfix"><h1 itemprop="name"><a href="/2015/11/25/2015-11-25-toss-gulp/" class="title=&quot;Gulp探究折腾之路(I)&quot;" itemprop="url">Gulp探究折腾之路(I)</a></h1><p class="article-author">By <a href="https://www.jeffjade.com/about-me" title="晚晴幽草轩轩主" target="_blank" itemprop="author">晚晴幽草轩轩主</a></p><p class="article-time"><time datetime="2015-11-24T16:00:00.000Z" itemprop="datePublished">发表于 2015-11-25</time></p></header><div class="article-content"><div class="bottom-gg-module"><div class="jade-gg-block"><a class="width-block-wrap fancybox" href="https://nicelinks.site/?utm_source=jeffjade.com&pid=topad" title="倾城之链" target="_blank"><img class="width-block-wrap" style="width: 100%;max-height: 200px" src="https://image.nicelinks.site/blank.gif" alt="倾城之链" data-echo="https://image.nicelinks.site/倾城之链-Banner.png"></a></div></div><p><strong>前言:</strong> <code>gulp</code>是前端开发过程中对代码进行构建的工具，是自动化项目的构建利器；她不仅能对网站资源进行优化，而且在开发过程中很多重复的任务能够使用正确的工具自动完成；使用她，我们不仅可以很愉快的编写代码，而且大大提高我们的工作效率。相比于<code>grunt</code>的频繁 IO 操作，gulp的流操作，能更快地更便捷地完成构建工作。此处仅记录初步折腾中所遇点滴以及待解决的点。</p><a id="more"></a><p><img src="https://image.nicelinks.site/blank.gif" alt="题图来自女友摄影作品:16-03-12-清晨-深圳" data-echo="//image.nicelinks.site/loveFlower.jpg"></p><h2 id="Gulp折腾之初探"><a href="#Gulp折腾之初探" class="headerlink" title="Gulp折腾之初探"></a><strong>Gulp折腾之初探</strong></h2><h3 id="折腾之战略上的藐视"><a href="#折腾之战略上的藐视" class="headerlink" title="折腾之战略上的藐视"></a><strong>折腾之战略上的藐视</strong></h3><p>回过头看Gulp的折腾历程，使用还是非常简易的。初步入门资料可参考<a href="#refer">这里</a>。所以战略上一定要藐视”她”;当然战术上要给予足够的重视。毕竟要依赖她以及其他各种插件and编辑器等实现前端<strong>工程化，组件化，模块化，便捷化</strong>是一个蛮复杂的过程。总之，折腾伊始需要自信就好，折腾过程带着耐心就好。譬如，想借助gulp压缩美化下js代码，写如下代码于gulpfile.js即可：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">    uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</div><div class="line"><span class="keyword">var</span> gNeedDealJsFile = <span class="string">'./js/*.js'</span>; <span class="comment">//javascrip代码存放路径</span></div><div class="line"><span class="keyword">var</span> outPut = <span class="string">"./build/"</span>;  <span class="comment">//指定输出文件存放目录</span></div><div class="line">gulp.task(<span class="string">'scripts'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp.src(gNeedDealJsFile)</div><div class="line">        .pipe(uglify())</div><div class="line">        .pipe(rename(&#123;</div><div class="line">            <span class="attr">suffix</span>: <span class="string">'.min'</span></div><div class="line">        &#125;))</div><div class="line">        .pipe(gulp.dest(outPut));</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p></p><p>在gulpfile.js同级目录运行<code>gulp scripts</code>即可；PS:当然前提是您已经安装了nodejs，并且使用npm安装了代码中需要的插件<code>gulp</code>和<code>gulp-uglify</code>与本地。</p><h3 id="摒弃了gulp-run"><a href="#摒弃了gulp-run" class="headerlink" title="摒弃了gulp.run()"></a><strong>摒弃了gulp.run()</strong></h3><p>gulp的API很简单，常用的也就几个：watch, task, dest, src；目前已经摒弃了run方法。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//创建Default Task:注册缺省任务</span></div><div class="line">gulp.task(<span class="string">'default'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    gulp.run(<span class="string">'jshint'</span>, <span class="string">'scripts'</span>);</div><div class="line"></div><div class="line">    gulp.watch(workSpace, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        gulp.run(<span class="string">'jshint'</span>, <span class="string">'scripts'</span>);</div><div class="line">    &#125;)</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p></p><blockquote><p>gulp.run() has been deprecated. Use task dependencies or gulp.watch task triggering instead.</p></blockquote><p>可以根据<strong>gulp.task(name[, deps], fn)</strong>特性写法替代之。<strong>deps</strong>：(Array)一个包含任务列表的数组，这些任务会在你当前任务运行之前完成。</p><blockquote><p><strong>注意：</strong> 你的任务是否在这些前置依赖的任务完成之前运行了？请一定要确保你所依赖的任务列表中的任务都使用了正确的异步执行方式：使用一个 callback，或者返回一个 promise 或 stream。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//创建Default Task:注册缺省任务</span></div><div class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'jshint'</span> , <span class="string">'scripts'</span>, <span class="string">'watch'</span>]);</div></pre></td></tr></table></figure><p></p></blockquote><h3 id="折腾gulp-src"><a href="#折腾gulp-src" class="headerlink" title="折腾gulp.src()"></a><strong>折腾gulp.src()</strong></h3><p>Gulp使用<a href="https://github.com/isaacs/node-glob" target="_blank" rel="external">node-glob</a>来从你指定的glob里面获取文件，这里列举下面的例子来阐述，方便大家理解：</p><blockquote><p>js/app.js 精确匹配文件<br>js/<em>.js 仅匹配js目录下的所有后缀为.js的文件<br>js/</em>/.js 匹配js目录及其子目录下所有后缀为.js的文件<br>!js/app.js 从匹配结果中排除js/app.js，这种方法在你想要匹配除了特殊文件之外的所有文件时非常管用<br>*.+(js|css) 匹配根目录下所有后缀为.js或者.css的文件<br>此外，Gulp也有很多其他的特征，但并不常用。如果你想了解更多的特征，请查看<a href="https://github.com/isaacs/minimatch" target="_blank" rel="external">Minimatch</a>文档。</p></blockquote><p>js目录下包含了压缩和未压缩的JavaScript文件，现在我们想要创建一个任务来压缩还没有被压缩的文件，我们需要先匹配目录下所有的JavaScript文件，然后<strong>排除后缀为.min.js的文件</strong>:<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp.src([<span class="string">'js/**/*.js'</span>, <span class="string">'!js/**/*.min.js'</span>])</div></pre></td></tr></table></figure><p></p><h3 id="使用gulp-jshint"><a href="#使用gulp-jshint" class="headerlink" title="使用gulp-jshint()"></a><strong>使用gulp-jshint()</strong></h3><p>好吧，不同帮派，不同侠士，对于代码的输出是不一致的。而这JS又没像Py那般天生带有美丽的基因。即便出了jshint这样的好利器，然，也得考虑下兼顾团队已有的Style。所以，这里配置得纠结下,<a href="https://www.zybuluo.com/mdeditor#200574" target="_blank" rel="external">微说Gulp之gulp-jshint</a>。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'lint'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">true<span class="keyword">return</span> gulp.src(workSpace)</div><div class="line">truetrue.pipe(jshint())</div><div class="line">truetrue.pipe(jshint.reporter(<span class="string">'YOUR_REPOTER_HERE'</span>));</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p></p><p>这reporter使用”default”的话，就会采用默认蛮严格的检查手段。为了能够规范而不失灵活的撸起JS，在使用JShint之时，过滤掉哪些不合时宜的写法(如下写法就可以不留情的规避之)，就得斟酌下咯。列举些常见不推荐的写法，运行时提醒如下：</p><blockquote><p>Missing semicolon. (W033) //丢失分号<br>[‘lack’] is better written in dot notation //推荐xx.lack写法，而不是xx[‘lack’]<br>You might be leaking a variable (disX) here. (W120) //不推荐连等写法：比如posX = disX = 0;<br>‘status’ is defined but never used. (W098) //不推荐：定义之而不用之<br>Use ‘!==’ to compare with ‘’. (W041) //不推荐 “!=”或者”==”做变量是否相等判断。</p></blockquote><p><strong>只对发生更改的 js 文件进行语法检测</strong></p><p>更现实的开发场景是， 项目代码已存在很久，代码中有大量的不符合 jshint 规范的代码。 而根据当前的 gulp 配置，每次发生修改，都会全量检测一遍所有的文件的语法问题，实际上已存在的问题我并不想在本次提交中修复（同时也是其他同事写的，例如不加分号问题，改动量太大）。</p><p>结果就是，一启动 gulp，哗哗的语法错误提示，根本找不到自己想看的文件检测结果。这时修改一个文件，又对所有文件做了一次全量检测，又是哗哗的满屏错误提示。而我只关心当前修改的文件检测结果。</p><p>gulp 项目首页推荐了一个<strong>gulp-cached</strong>插件，正好解决了这个问题。<br></p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install </span>gulp-<span class="keyword">cached </span>--save-dev</div></pre></td></tr></table></figure><p></p><p>配置如下<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">    cache = <span class="built_in">require</span>(<span class="string">'gulp-cached'</span>),</div><div class="line">    jshint = <span class="built_in">require</span>(<span class="string">'gulp-jshint'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'jshint'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    gulp.src(<span class="string">'./src/**/*.js'</span>)</div><div class="line">        .pipe(cache(<span class="string">'jshint'</span>))</div><div class="line">        .pipe(jshint())</div><div class="line">        .pipe(jshint.reporter(<span class="string">'default'</span>));</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'watch'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    gulp.watch(<span class="string">'./src/**/*.js'</span>, [<span class="string">'jshint'</span>]);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'jshint'</span>, <span class="string">'watch'</span>]);</div></pre></td></tr></table></figure><p></p><p>这样就能清晰的看到刚才<strong>发生修改文件</strong>的语法检测结果了,欧耶。</p><h3 id="压缩-合并-重命名-输出-JS代码"><a href="#压缩-合并-重命名-输出-JS代码" class="headerlink" title="压缩-合并-重命名-输出~JS代码"></a><strong>压缩-合并-重命名-输出~JS代码</strong></h3><p><strong>压缩</strong>：<code>gulp-uglify</code>,挺好;<br>Ps： 有一款<code>gulp-minify</code>(Desc: Minify JavaScript with UglifyJS2)，默认压缩完毕之后会生成一个带<code>-min</code>的文件，略烦。</p><p><strong>合并</strong>：<code>gulp-concat</code>;指定合并生成名字即可：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.pipe(concat(<span class="string">'all.js'</span>))</div></pre></td></tr></table></figure><p></p><p><strong>重命名</strong>: <code>gulp-rename</code>;可以仅仅为名字指定后缀(不改变文件后缀)Like This:<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.pipe(rename(&#123;<span class="attr">suffix</span>: <span class="string">'.min'</span>&#125;))</div></pre></td></tr></table></figure><p></p><p><strong>输出</strong>: gulp自带方法<code>gulp.dest</code>。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//outPutPathName: String</span></div><div class="line">.pipe(gulp.dest(outPutPathName));</div></pre></td></tr></table></figure><p></p><h3 id="压缩-CSS代码-合并-重命名-输出同上"><a href="#压缩-CSS代码-合并-重命名-输出同上" class="headerlink" title="压缩~CSS代码(合并-重命名-输出同上)"></a><strong>压缩~CSS代码(合并-重命名-输出同上)</strong></h3><p><strong>压缩</strong>： <code>gulp-minify-css</code>;嗯，这个直接将原文件压缩了，默认没有改其名字。如果直接输出到该目录下，会覆盖原文件；若要输出同目录之下，可改改名字再输出,Like this：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.pipe(minifycss())</div><div class="line">.pipe(rename(&#123;<span class="attr">suffix</span>: <span class="string">'.min'</span>&#125;))</div><div class="line">.pipe(gulp.dest(outPut));</div></pre></td></tr></table></figure><p></p><p>PS:这个插件(默认)也会帮着干掉注释，过滤掉空类(没有内容的描述)等等。</p><h2 id="gulp-load-plugins模块"><a href="#gulp-load-plugins模块" class="headerlink" title="gulp-load-plugins模块"></a><strong>gulp-load-plugins模块</strong></h2><p>一般情况下，gulpfile.js中的模块需要一个个加载。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">    jshint = <span class="built_in">require</span>(<span class="string">'gulp-jshint'</span>),</div><div class="line">    uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>),</div><div class="line">    concat = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'js'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="keyword">return</span> gulp.src(<span class="string">'js/*.js'</span>)</div><div class="line">      .pipe(jshint())</div><div class="line">      .pipe(jshint.reporter(<span class="string">'default'</span>))</div><div class="line">      .pipe(uglify())</div><div class="line">      .pipe(concat(<span class="string">'app.js'</span>))</div><div class="line">      .pipe(gulp.dest(<span class="string">'build'</span>));</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p></p><p>上面代码中，除了gulp模块以外，还加载另外三个模块。</p><p>这种一一加载的写法，比较麻烦。使用<code>gulp-load-plugins</code>模块，可以加载package.json文件中所有的gulp模块。上面的代码用gulp-load-plugins模块改写，就是下面这样。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">    gulpLoadPlugins = <span class="built_in">require</span>(<span class="string">'gulp-load-plugins'</span>),</div><div class="line">    plugins = gulpLoadPlugins();</div><div class="line"></div><div class="line">gulp.task(<span class="string">'js'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="keyword">return</span> gulp.src(<span class="string">'js/*.js'</span>)</div><div class="line">      .pipe(plugins.jshint())</div><div class="line">      .pipe(plugins.jshint.reporter(<span class="string">'default'</span>))</div><div class="line">      .pipe(plugins.uglify())</div><div class="line">      .pipe(plugins.concat(<span class="string">'app.js'</span>))</div><div class="line">      .pipe(gulp.dest(<span class="string">'build'</span>));</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p></p><p>上面代码假设package.json文件包含以下内容。<br></p><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="attr">"devDependencies"</span>: &#123;</div><div class="line">      <span class="attr">"gulp-concat"</span>: <span class="string">"~2.2.0"</span>,</div><div class="line">      <span class="attr">"gulp-uglify"</span>: <span class="string">"~0.2.1"</span>,</div><div class="line">      <span class="attr">"gulp-jshint"</span>: <span class="string">"~1.5.1"</span>,</div><div class="line">      <span class="attr">"gulp"</span>: <span class="string">"~3.5.6"</span></div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><h3 id="gulp插件的快速安装"><a href="#gulp插件的快速安装" class="headerlink" title="gulp插件的快速安装"></a><strong>gulp插件的快速安装</strong></h3><p>谈及了基本应用之后，不得不谈下如何快速安装插件(毕竟，合作开发，彼此都能便捷使用，才是王道)。对于所使用的插件可以一个个安装，同时也可以批量安装Like This：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install gulp-concat gulp-uglify gulp-jshint [...] gulp-rename --save-dev</div></pre></td></tr></table></figure><p></p><blockquote><p>–save：将保存配置信息至package.json（package.json是nodejs项目配置文件）；<br>-dev：保存至package.json的devDependencies节点，不指定-dev将保存至dependencies节点；</p></blockquote><p>为什么要保存至package.json？因为node插件包相对来说非常庞大，所以不加入版本管理，将配置信息写入package.json并将其加入版本管理，其他开发者对应下载即可（命令提示符执行<code>npm install</code>，则会根据package.json下载所有需要的包）。</p><p>对于这块细节可以参看<a href="http://www.ydcss.com/archives/18" target="_blank" rel="external">gulp详细入门教程</a>；大概来讲就是可以借助<code>npm init</code>命令，按照其一步步提示，输入项目相关信息。完毕之后，加入需要依赖的插件以及版本信息即可(<strong>注意</strong>：这是一个普通json文件，一定得符合json格式；同时需要安装的插件版本也得是 <strong>&lt;=</strong> 线上最新版本)。PS：前文涉及到的插件下载，即可如此配置予以完成：在生成的package.json中加入如下json(2015-10-26日情形):<br></p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">"devDependencies": &#123;</div><div class="line">     "gulp-concat": "~2.6.0",</div><div class="line">     "gulp-uglify": "~1.4.2",</div><div class="line">     "gulp-jshint": "~1.11.2",</div><div class="line">     "gulp-rename": "~1.2.2",</div><div class="line">     "gulp-minify-css": "~1.2.1",</div><div class="line">     "gulp-cached": "~1.1.0",</div><div class="line">     "gulp": "~3.9.0"</div><div class="line">  &#125;</div></pre></td></tr></table></figure><p></p><p>如此，其他开发者只需更新gulpfile.js以及这个package.json，运行<code>npm install</code>即可下载gulp所依赖插件于本地，(<em>@ο@</em>) 哇～So Cool。</p><h3 id="gulp多项目管理-npm-link"><a href="#gulp多项目管理-npm-link" class="headerlink" title="gulp多项目管理(npm link)"></a><strong>gulp多项目管理(npm link)</strong></h3><p>要谈下多项目管理了；比如这种场景：对于项目非常多而小，而且彼此间相互独立；伊始，采用在项目根目录之下<code>gulpfile.js</code>和package.json（毕竟每个单独小项目都来一发单独配置，岂不是要疯掉了），会将需要的插件down于根目录下；而在gulpfile.js中控制所要操作的单个小项目路径。这样每次切换项目，都要更改下gulpfile.js,即便将这个分离出来写一个config.js,也得手动去更改，略略有点蛋疼。幸好，gulp有<code>npm link</code>,哇哦，体贴如你，夫复何求？</p><p>对于<code>npm link</code>的介绍，可以参见@阮一峰<a href="http://javascript.ruanyifeng.com/nodejs/npm.html#toc15" target="_blank" rel="external">npm模块管理器</a>一文；我们可以将所需的插件，全局环境下载，在单独项目中link全局环境下插件。如此，不仅可以不用每次都down，而且，依赖的插件需要update，只需一地更新，所link之处都会受益。</p><p>具体做法，首先将需要的插件全局环境下Down下来：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install gulp gulp-concat gulp-rename gulp-uglify  gulp-minify-css gulp-jshint gulp-cached -g</div></pre></td></tr></table></figure><p></p><p>接下来，(如果我们要使用gulp-concat这个模块)我们进入单独小项目(eg: gulpTest),使用<code>npm link gulp-concat</code>命令会去【mac/linux】<em>/usr/local/lib/node_modules/</em>, 【window】<em>D:\UserProfiles\username\AppData\Roaming\npm\node_modules</em>,目录下查找名叫<code>gulp-concat</code>的模块，找到这个模块后把该的目录链接到 ~/work/**/gulpTest/node_modules/gulp-concat 这个目录上来。如此，在此项目小项目中的gulpfile.js中也可以加以使用了。当然，<code>npm link</code>也支持多个参数:<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm link gulp gulp-concat gulp-rename gulp-uglify  gulp-minify-css gulp-jshint gulp-cached</div></pre></td></tr></table></figure><p></p><p>PS:这样使用时，需要注意忽略掉node_modules目录下的js/css代码，gulp.src参数数组中可以加入<code>&#39;!node_modules/**/*.+(js|css)&#39;</code>以过滤之。</p><hr><p><strong>注:</strong>即便使用<code>npm link</code>感觉也不是一个特别<strong>简洁</strong>的方案。并且在使用的时候还遇到了些许问题: 之前有提问于@segmentFault<a href="http://segmentfault.com/q/1010000003969179" target="_blank" rel="external">gulp如何管理多项目？</a> 以及@V2EX <a href="https://www.v2ex.com/t/234896#reply14" target="_blank" rel="external">gulp如何管理多项目</a>;热心码友也提出了一些可行的建议，比如：配置多个task，或者采用<code>fbi</code>，或者采用<code>nodejs 中的 NODE_PATH</code>@<a href="http://segmentfault.com/a/1190000002478924" target="_blank" rel="external">nodejs 中的 NODE_PATH</a>等等;此处有待进一步学习&amp;折腾&amp;择决; (如有简洁方案，欢求指点，拜谢)。</p><hr><h3 id="gulp-util幸之助"><a href="#gulp-util幸之助" class="headerlink" title="gulp-util幸之助"></a><strong>gulp-util幸之助</strong></h3><p><strong>幸亏有gulp-util之协助</strong>：在折腾的过程中，难免不会出现奇奇怪怪的问题；然而gulp本身的报错提示机制真心让新手的我蛋蛋的忧伤：比如在折腾的过程中压缩JS代码就出现<code>Uglify throws Parse error</code>;可是提示却…幸好@stackoverflow<a href="http://stackoverflow.com/questions/28003104/uglify-throws-parse-error" target="_blank" rel="external">Uglify throws Parse error</a>一个问答中，大牛给予了明灯般的指导：引入<code>gulp-util</code>;原话如下：</p><blockquote><p><code>uglify</code> will parse the script content before minifying it. I suspect that one of the <code>browserify</code> source maps are being included in the stream down to <code>uglify</code>. Anyway to find the problem you can use <code>gulp-util</code>‘s log method to handle uglify’s exceptions. Example:<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">var gulpUtil = <span class="built_in">require</span>(<span class="string">'gulp-util'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'scripts'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    ...</div><div class="line">        .pipe(sourcemaps.init(&#123;<span class="attr">loadMaps</span>: <span class="literal">true</span>&#125;))</div><div class="line">        .pipe(uglify().on(<span class="string">'error'</span>, gulpUtil.log)) <span class="comment">// notice the error event here</span></div><div class="line">        .pipe(sourcemaps.write(<span class="string">'./'</span>))</div><div class="line">        .pipe(gulp.dest(<span class="string">'./web/js'</span>));</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p></p></blockquote><h3 id="实时刷新页面"><a href="#实时刷新页面" class="headerlink" title="实时刷新页面"></a><strong>实时刷新页面</strong></h3><h4 id="gulp-livereload模块"><a href="#gulp-livereload模块" class="headerlink" title="gulp-livereload模块"></a><strong>gulp-livereload模块</strong></h4><p><code>gulp-livereload</code>模块用于自动刷新浏览器，反映出源码的最新变化。它除了模块以外，还需要在浏览器中安装插件，用来配合源码变化。</p><p><a href="http://livereload.com/" target="_blank" rel="external">LiveReload</a>结合了浏览器扩展（包括Chrome extension），在发现文件被修改时会实时更新网页。它可以和gulp-watch插件或者前面描述的gulp-watch()函数一起使用。下面有一个<code>gulp-livereload</code>仓库中的README文件提到的例子:<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">    less = <span class="built_in">require</span>(<span class="string">'gulp-less'</span>),</div><div class="line">    livereload = <span class="built_in">require</span>(<span class="string">'gulp-livereload'</span>),</div><div class="line">    watch = <span class="built_in">require</span>(<span class="string">'gulp-watch'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'less'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">   gulp.src(<span class="string">'less/*.less'</span>)</div><div class="line">      .pipe(watch())</div><div class="line">      .pipe(less())</div><div class="line">      .pipe(gulp.dest(<span class="string">'css'</span>))</div><div class="line">      .pipe(livereload());</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p></p><p>这会监听到所有与less/*.less相匹配的文件的变化。一旦监测到变化，就会生成css并保存，然后重新加载网页.</p><h4 id="BrowserSync"><a href="#BrowserSync" class="headerlink" title="BrowserSync"></a><strong><a href="https://www.npmjs.com/package/browser-sync#requirements" target="_blank" rel="external">BrowserSync</a></strong></h4><p><strong>安装 BrowserSync</strong><br>您可以选择从Node.js的包管理（NPM）库中 安装BrowserSync。打开一个终端窗口，运行以下命令：</p><blockquote><p>npm install -g browser-sync</p></blockquote><p>您告诉包管理器下载BrowserSync文件，并在全局下安装它们，您可以在所有项目(任何目录)中使用。</p><p>当然您也可以结合gulpjs或gruntjs构建工具来使用，在您需要构建的项目里运行下面的命令:</p><blockquote><p>npm install –save-dev browser-sync</p></blockquote><p><strong><a href="http://www.browsersync.cn/#install" target="_blank" rel="external">启动 BrowserSync</a></strong><br><strong>静态网站</strong><br>如果您想要监听.css文件, 您需要使用服务器模式。 BrowserSync 将启动一个小型服务器，并提供一个URL来查看您的网站。</p><blockquote><p>// –files 路径是相对于运行该命令的项目（目录）<br>browser-sync start –server –files “css/*.css”</p></blockquote><p>如果您需要监听多个类型的文件，您只需要用逗号隔开。例如我们再加入一个.html文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// --files 路径是相对于运行该命令的项目（目录）</span></div><div class="line">browser-sync start --server --files <span class="string">"css/*.css, *.html"</span></div><div class="line"><span class="comment">// 如果你的文件层级比较深，您可以考虑使用 "**"（表示任意目录）匹配，任意目录下任意.css 或 .html文件。</span></div><div class="line">browser-sync start --server --files <span class="string">"**/*.css, **/*.html"</span></div></pre></td></tr></table></figure><p><strong>注：</strong>在该文件下运行命令，默认需要启动网站文件：index.html。</p><p><strong>动态网站</strong><br>如果您已经有其他本地服务器环境PHP或类似的，您需要使用<strong><em>代理模式</em></strong>。 BrowserSync将通过代理URL(localhost:3000)来查看您的网站。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 主机名可以是ip或域名</span></div><div class="line">browser-sync start --proxy <span class="string">"主机名"</span> <span class="string">"css/*.css"</span></div></pre></td></tr></table></figure><p></p><p>在本地创建了一个PHP服务器环境，并通过绑定Browsersync.cn来访问本地服务器，使用以下命令方式，Browsersync将提供一个新的地址localhost:3000来访问Browsersync.cn，并监听其css目录下的所有css文件。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">browser-sync start --proxy <span class="string">"Browsersync.cn"</span> <span class="string">"css/*.css"</span></div></pre></td></tr></table></figure><p></p><p>参考博文：<a href="http://acgtofe.com/posts/2015/03/more-fluent-with-browsersync/" target="_blank" rel="external">BrowserSync，迅捷从免F5开始</a>。</p><hr><p><strong>注</strong>：使用的时候纯路径比如”Browsersync.cn”尚好着，然而地址后面带一堆参数时候，就会遇到些问题；暂时还未搞明白以解决之，特注之，待弄懂！！</p><hr><h3 id="前端组件html模板化-gulp-tlp2mod"><a href="#前端组件html模板化-gulp-tlp2mod" class="headerlink" title="前端组件html模板化(gulp-tlp2mod)"></a><strong>前端组件html模板化(gulp-tlp2mod)</strong></h3><p>参考博文：<a href="https://github.com/itbeihe/component-html-engine-demo" target="_blank" rel="external">component-html-engine-demo</a>有叙述有Demo，帮了大忙。</p><p>为了前端代码的模块化，必要将JS逻辑代码于布局模板代码分离开来（当然还有CSS以及静态资源也都当分离）；初来乍到，遇到问题了，如何<strong>把tpl转变成js呢？</strong>，OK既然用了构建工具，那么自然也有对应的插件吧，果然 <a href="https://github.com/supersheep/gulp-tpl2mod" target="_blank" rel="external">gulp-tpl2mod</a>~<strong>模板文件转js插件</strong>;再借助require.js, 先使用gulp-tpl2mod把模板转换成js字符串，然后包装成一个模块，再main.js中引用这个模块就行了，大功告成；如此，项目工程化又前进一步。</p><h2 id="refer" style="font-weight:bold">折腾之入门所参考文章资料</h2><p><a href="http://www.gulpjs.com.cn/docs/api/" target="_blank" rel="external">gulp API 文档</a><br><a href="http://markpop.github.io/2014/09/17/Gulp%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" target="_blank" rel="external">Gulp入门教程</a><br><strong><a href="http://www.w3ctech.com/topic/134" target="_blank" rel="external">Gulp开发教程（翻译）</a></strong><br><strong><a href="http://javascript.ruanyifeng.com/tool/gulp.html" target="_blank" rel="external">Gulp：任务自动管理工具</a></strong><br><a href="http://segmentfault.com/a/1190000000372547" target="_blank" rel="external">前端构建工具gulp入门教程</a><br><a href="http://colobu.com/2014/11/17/gulp-plugins-introduction/" target="_blank" rel="external">gulp plugins 插件介绍</a><br><strong><a href="http://www.ydcss.com/archives/18" target="_blank" rel="external">gulp详细入门教程</a></strong></p></div><a href="#reward-modal-container" aria-label="Open Reward" id="open-reward-modal-a">打赏</a><div id="reward-modal-container"><div class="modal-div"><h1 class="reward-title-h1">倾情打赏</h1><a href="javascript:history.go(-1)" aria-label="Close Modal" class="close-modal-a"></a><p class="reward-thx-p">感谢您的支持，我将继续努力！</p><div class="reward-img-div"><img class="reward-qr-img weichat active" src="https://image.nicelinks.site/blank.gif" alt="微信赞助" data-echo="//image.nicelinks.site/weixin_pay.jpg"> <img class="reward-qr-img alipay" src="https://image.nicelinks.site/blank.gif" alt="支付宝赞助" data-echo="//image.nicelinks.site/zhifubao_pay.jpg"></div><div id="reward-jade-moudle" node-type="platform-choice" class="platform-choice clearfix"><div class="platform-item"><span node-type="check-platform" data-id="weichat" class="platform-radio-box platform-checked"></span> <span class="platform-logo weichat"></span></div><div class="platform-item"><span node-type="check-platform" data-id="alipay" class="platform-radio-box"></span> <span class="platform-logo alipay"></span></div></div><div class="reward-text-div">扫码打赏，建议金额1-10元</div><p class="reward-tip-p">提醒：打赏金额将直接进此方账号，无法退款，请您谨慎操作。</p></div></div><div id="wechat-public-number" style="width: 100%;display: flex;justify-content: center;flex-direction: column;align-items: center"><img style="width: 256px;min-width: 200px !important" src="https://image.nicelinks.site/blank.gif" alt="静晴轩" data-echo="https://image.nicelinks.site/qrcode_jqx.jpg"><p style="text-align: center;color: #888;font-weight: 500;text-shadow: 1px 1px 0 #fff">个人微信公众号</p><div></div></div><div id="cc-copyright" class="cc-content"><h3>文档信息</h3><ul><li>版权声明：知识共享署名-非商业性使用-禁止演绎<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">（创意共享3.0许可证）</a></li><li>文章出处：<a href="http://www.jeffjade.com" title="晚晴幽草轩">晚晴幽草轩</a></li><li>发表日期：<time datetime="2015-11-24T16:00:00.000Z" itemprop="datePublished">2015-11-25</time></li><li>社交媒体： <a href="http://weibo.com/jeffjade" target="_blank" class="icon-weibo" title="微博"></a> <a href="https://github.com/nicejade" target="_blank" class="icon-github" title="github"></a> <a href="https://twitter.com/nicejadeyang" target="_blank" class="icon-twitter" title="twitter"></a> <a href="https://www.facebook.com/nice.jade.yang" target="_blank" class="icon-facebook" title="facebook"></a></li></ul></div><footer class="article-footer clearfix"><div class="article-catetags"><div class="article-categories"><span></span> <a class="article-category-link" href="/categories/Front-End/">Front-End</a></div><div class="article-tags"><span></span> <a href="/tags/NodeJs/">NodeJs</a><a href="/tags/Gulp/">Gulp</a></div></div><div class="article-share" id="share"><div data-url="https://www.jeffjade.com/2015/11/25/2015-11-25-toss-gulp/" data-title="Gulp探究折腾之路(I) | 晚晴幽草轩" data-tsina="jeffjade" class="share clearfix"></div></div></footer></article><nav class="article-nav clearfix"><div class="prev"><a href="/2015/11/25/2015-11-31-jQuery-vs-javaScript/" title="jQuery VS JavaScript原生API"><strong>上一篇：</strong><br><span>jQuery VS JavaScript原生API</span></a></div><div class="next"><a href="/2015/11/14/2015-11-14-css-achieve-horizontal_vertical_center/" title="CSS实现水平|垂直居中漫谈"><strong>下一篇：</strong><br><span>CSS实现水平|垂直居中漫谈</span></a></div></nav><hr><div id="gitalk-container"></div></div><div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div><div id="toc" class="toc-aside"><strong class="toc-title">文章目录</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Gulp折腾之初探"><span class="toc-number">1.</span> <span class="toc-text">Gulp折腾之初探</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#折腾之战略上的藐视"><span class="toc-number">1.1.</span> <span class="toc-text">折腾之战略上的藐视</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#摒弃了gulp-run"><span class="toc-number">1.2.</span> <span class="toc-text">摒弃了gulp.run()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#折腾gulp-src"><span class="toc-number">1.3.</span> <span class="toc-text">折腾gulp.src()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用gulp-jshint"><span class="toc-number">1.4.</span> <span class="toc-text">使用gulp-jshint()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#压缩-合并-重命名-输出-JS代码"><span class="toc-number">1.5.</span> <span class="toc-text">压缩-合并-重命名-输出~JS代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#压缩-CSS代码-合并-重命名-输出同上"><span class="toc-number">1.6.</span> <span class="toc-text">压缩~CSS代码(合并-重命名-输出同上)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gulp-load-plugins模块"><span class="toc-number">2.</span> <span class="toc-text">gulp-load-plugins模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#gulp插件的快速安装"><span class="toc-number">2.1.</span> <span class="toc-text">gulp插件的快速安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gulp多项目管理-npm-link"><span class="toc-number">2.2.</span> <span class="toc-text">gulp多项目管理(npm link)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gulp-util幸之助"><span class="toc-number">2.3.</span> <span class="toc-text">gulp-util幸之助</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#实时刷新页面"><span class="toc-number">2.4.</span> <span class="toc-text">实时刷新页面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#gulp-livereload模块"><span class="toc-number">2.4.1.</span> <span class="toc-text">gulp-livereload模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BrowserSync"><span class="toc-number">2.4.2.</span> <span class="toc-text">BrowserSync</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#前端组件html模板化-gulp-tlp2mod"><span class="toc-number">2.5.</span> <span class="toc-text">前端组件html模板化(gulp-tlp2mod)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#refer"><span class="toc-number">3.</span> <span class="toc-text">折腾之入门所参考文章资料</span></a></li></ol></div><div id="asidepart"><div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div><aside class="clearfix"><div class="linkslist"><p class="asidetitle">倾情款赠</p><div style="width:100%"><img style="width:100%" src="https://image.nicelinks.site/blank.gif" alt="倾情捐赠" data-echo="https://image.nicelinks.site/%E8%B5%9E%E8%B5%8F%E7%A0%81.jpeg?imageView2/1/w/800/h/800/interlace/1/ignore-error/1"></div></div><div class="wbfollow"><p class="asidetitle">微博互粉</p><span class="sidebar-top-tip">亦可点击 Enter 键隐藏侧边栏</span><iframe width="100%" height="119" class="share_self" frameborder="0" scrolling="no" src="//widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=0&speed=0&skin=3&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=3235949794&verifier=5c6bff53&colors=f0f0f0,fff,666666,0082cb,ecfbfd&dpc=1"></iframe></div><div class="widget-wrap linkslist"><h3 class="widget-title asidetitle">近期文章</h3><div class="widget"><ul><li><a href="/2020/07/27/165-aweome-picture-tool-website-list/">超实用图片工具网站，值得典藏</a></li><li><a href="/2020/05/25/164-adding-shadow-effect-to-batch-image/">为批量图片添加外阴影效果</a></li><li><a href="/2020/04/30/163-front-end-project-development-specification-opinion/">前端项目开发规范意见</a></li><li><a href="/2020/04/15/162-front-end-development-and-devops-practice/">前端开发与 DevOps 实践</a></li><li><a href="/2020/02/29/161-how-to-write-a-good-readme-for-your-project/">如何为项目编写良好 README</a></li><li><a href="/2019/12/11/160-how-to-use-npm-npx-tutorial/">前端利器之 npx 使用纪要</a></li><li><a href="/2019/08/28/159-js-import-export-vs-require-module-exports/">JavaScript 之 import export Vs require module.exports</a></li><li><a href="/2019/08/25/156-arya-jarvis-born-for-efficiency/">为高效而生：Arya Jarvis</a></li><li><a href="/2019/07/29/156-vuepress-hexo-jekyll-ghost-gitbook-hugo-solo_compare-personal-website-generator/">如何选定搭建个人独立博客工具</a></li><li><a href="/2019/06/14/156-puppeteer-robot/">基于 Puppeteer 构建简易机器人</a></li><li><a href="/2019/05/31/155-arya-markdown-online-editor/">Arya - 在线 Markdown 编辑器</a></li><li><a href="/2019/04/26/154-colorize-your-javascript-code-logs/">为你的 JavaScript 代码日志着色</a></li><li><a href="/2019/03/18/153-best-front-end-hacking-cheatsheets/">最好的前端黑客秘籍</a></li><li><a href="/2019/03/10/151-quickapp-common-problems-and-solutions/">快应用开发常见问题及解决方案</a></li><li><a href="/2019/02/17/151-aweome-beautiful-picture-website-list/">欲问美图何处寻？倾城之链有定音</a></li></ul></div></div><div class="categorieslist"><p class="asidetitle">云轩分类</p><ul><li><a href="/categories/Android/" title="Android">Android<sup>9</sup></a></li><li><a href="/categories/Front-End/" title="Front-End">Front-End<sup>53</sup></a></li><li><a href="/categories/Health/" title="Health">Health<sup>2</sup></a></li><li><a href="/categories/Movie/" title="Movie">Movie<sup>3</sup></a></li><li><a href="/categories/Program/" title="Program">Program<sup>20</sup></a></li><li><a href="/categories/Read/" title="Read">Read<sup>3</sup></a></li><li><a href="/categories/Share/" title="Share">Share<sup>19</sup></a></li><li><a href="/categories/Thought/" title="Thought">Thought<sup>21</sup></a></li><li><a href="/categories/Toss/" title="Toss">Toss<sup>23</sup></a></li><li><a href="/categories/Travel/" title="Travel">Travel<sup>3</sup></a></li><li><a href="/categories/倾城之链/" title="倾城之链">倾城之链<sup>2</sup></a></li><li><a href="/categories/快应用/" title="快应用">快应用<sup>6</sup></a></li></ul></div><div class="linkslist"><p class="asidetitle">广而告之</p><div class="jade-gg-block width-block-wrap"><a class="width-block-wrap" href="https://nicelinks.site?utm_source=jeffjade.com&pid=sidebar-advertisement" target="_blank" title="倾城之链"><img class="width-block-wrap" src="https://image.nicelinks.site/blank.gif" alt="倾城之链 | 小程序码" data-echo="https://image.nicelinks.site/nicelinks-miniprogram-code.jpeg"></a></div></div><div class="linkslist"><p class="asidetitle">最新作品</p><div class="jade-gg-block width-block-wrap"><a class="width-block-wrap" href="http://nicelinks.site/?utm_source=jeffjade.com&pid=aside" target="_blank" title="倾城之链"><img class="width-block-wrap" src="https://image.nicelinks.site/blank.gif" alt="倾城之链" data-echo="https://image.nicelinks.site/nicelinks-site.jpg"></a></div></div><div class="linkslist"><p class="asidetitle">轩站热度</p><!-- 
    <font id="run_time_long"></font><br>
    <span id="busuanzi_container_site_pv">
      本站总访问量 <span style='color:purple' id="busuanzi_value_site_pv"></span> 次
    </span><br>
    <span id="busuanzi_container_site_uv">
      本站访客人数 <span style='color:purple' id="busuanzi_value_site_uv"></span> 次
    </span><br>
    <span id="busuanzi_container_page_pv">
      本文总阅读量 <span style='color:purple' id="busuanzi_value_page_pv"></span> 次
    </span>
   --><div id="clustrmaps-count"></div><p style="text-align:center">( Start counting from 07 / 13 / 2017 )</p></div><div class="tagslist"><p class="asidetitle">云轩标签</p><ul class="clearfix"><li><a href="/tags/Share/" title="Share">Share<sup>50</sup></a></li><li><a href="/tags/Thought/" title="Thought">Thought<sup>36</sup></a></li><li><a href="/tags/JavaScript/" title="JavaScript">JavaScript<sup>31</sup></a></li><li><a href="/tags/Toss/" title="Toss">Toss<sup>29</sup></a></li><li><a href="/tags/Tools/" title="Tools">Tools<sup>26</sup></a></li><li><a href="/tags/Vue/" title="Vue">Vue<sup>18</sup></a></li><li><a href="/tags/Efficiency/" title="Efficiency">Efficiency<sup>18</sup></a></li><li><a href="/tags/Android/" title="Android">Android<sup>11</sup></a></li><li><a href="/tags/Webpack/" title="Webpack">Webpack<sup>9</sup></a></li><li><a href="/tags/NodeJs/" title="NodeJs">NodeJs<sup>8</sup></a></li><li><a href="/tags/快应用/" title="快应用">快应用<sup>7</sup></a></li><li><a href="/tags/Lua/" title="Lua">Lua<sup>7</sup></a></li><li><a href="/tags/Gulp/" title="Gulp">Gulp<sup>6</sup></a></li><li><a href="/tags/Java/" title="Java">Java<sup>6</sup></a></li><li><a href="/tags/CSS/" title="CSS">CSS<sup>5</sup></a></li><li><a href="/tags/Chrome/" title="Chrome">Chrome<sup>5</sup></a></li><li><a href="/tags/Markdown/" title="Markdown">Markdown<sup>4</sup></a></li><li><a href="/tags/SublimeText/" title="SublimeText">SublimeText<sup>4</sup></a></li><li><a href="/tags/Mac/" title="Mac">Mac<sup>4</sup></a></li><li><a href="/tags/Movie/" title="Movie">Movie<sup>4</sup></a></li><li><a href="/tags/Read/" title="Read">Read<sup>3</sup></a></li><li><a href="/tags/jQuery/" title="jQuery">jQuery<sup>3</sup></a></li><li><a href="/tags/Hexo/" title="Hexo">Hexo<sup>3</sup></a></li><li><a href="/tags/Prettier/" title="Prettier">Prettier<sup>3</sup></a></li><li><a href="/tags/Travel/" title="Travel">Travel<sup>3</sup></a></li><li><a href="/tags/Backbone/" title="Backbone">Backbone<sup>2</sup></a></li><li><a href="/tags/Front-End/" title="Front-End">Front-End<sup>2</sup></a></li><li><a href="/tags/React/" title="React">React<sup>2</sup></a></li><li><a href="/tags/Regex/" title="Regex">Regex<sup>2</sup></a></li><li><a href="/tags/倾城之链/" title="倾城之链">倾城之链<sup>2</sup></a></li><li><a href="/tags/Git/" title="Git">Git<sup>2</sup></a></li><li><a href="/tags/npm/" title="npm">npm<sup>2</sup></a></li><li><a href="/tags/Arya/" title="Arya">Arya<sup>2</sup></a></li></ul></div><div class="linkslist"><p class="asidetitle">云轩关注</p><ul><li><a href="https://www.ruanyifeng.com/blog/?utm_source=jeffjade.com" target="_blank" title="阮一峰的网络日志">阮一峰的网络日志</a></li><li><a href="https://blog.codingnow.com/?utm_source=jeffjade.com" target="_blank" title="云风Blog">云风Blog</a></li><li><a href="https://www.williamlong.info/?utm_source=jeffjade.com" target="_blank" title="月光博客">月光博客</a></li><li><a href="https://coolshell.cn/?utm_source=jeffjade.com" target="_blank" title="酷壳－陈浩">酷壳－陈浩</a></li><li><a href="https://www.zhangxinxu.com/?utm_source=jeffjade.com" target="_blank" title="鑫空间-鑫生活">鑫空间-鑫生活</a></li></ul></div><div class="linkslist"><p class="asidetitle">友情链接</p><ul><li><a href="https://nicelinks.site/?utm_source=jeffjade.com" target="_blank" title="倾城之链">倾城之链</a></li><li><a href="https://quickapp.lovejade.cn/?utm_source=jeffjade.com" target="_blank" title="静轩之别苑">静轩之别苑</a></li><li><a href="https://nice.lovejade.cn/?utm_source=jeffjade.com" target="_blank" title="静晴轩别苑">静晴轩别苑</a></li><li><a href="https://pizida.com/?utm_source=jeffjade.com" target="_blank" title="痞子达的小站">痞子达的小站</a></li><li><a href="http://blog.lovejade.cn/?utm_source=jeffjade.com" target="_blank" title="天意人间舫">天意人间舫</a></li><li><a href="https://www.cnblogs.com/jadeboy/?utm_source=jeffjade.com" target="_blank" title="云轩奕鹤">云轩奕鹤</a></li><li><a href="https://refined-x.com/?utm_source=jeffjade.com" target="_blank" title="前端路上">前端路上</a></li><li><a href="https://creatorsdaily.com?utm_source=jeffjade.com" target="_blank" title="创造者日报">创造者日报</a></li><li><a href="https://calpa.me/?utm_source=jeffjade.com" target="_blank" title="Calpa&#39;s Blog">Calpa&#39;s Blog</a></li><li><a href="https://istarvip.cn/links.html/?utm_source=jeffjade.com" target="_blank" title="猿码阁">猿码阁</a></li><li><a href="https://www.nihaoshijie.com.cn/?utm_source=jeffjade.com" target="_blank" title="吕小鸣">吕小鸣</a></li><li><a href="https://mayanbin.com/?utm_source=jeffjade.com" target="_blank" title="饮冰先生的博客">饮冰先生的博客</a></li><li><a href="http://konghy.cn/?utm_source=jeffjade.com" target="_blank" title="矿世的忧伤">矿世的忧伤</a></li><li><a href="https://dbarobin.com/blogroll/?utm_source=jeffjade.com" target="_blank" title="温国兵的随想录">温国兵的随想录</a></li><li><a href="https://www.jeffjade.com/nicelinks/#%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5" target="_blank" title="查看更多 &gt;&gt;">查看更多 &gt;&gt;</a></li></ul></div><div class="linkslist"><p class="asidetitle">好书推荐</p><ul><li><a href="https://quickapp.lovejade.cn/good-book-recommendation-list/#%E5%B9%B3%E5%87%A1%E7%9A%84%E4%B8%96%E7%95%8C" target="_blank" title="浪潮之巅">浪潮之巅</a></li><li><a href="https://quickapp.lovejade.cn/good-book-recommendation-list/#%E5%B9%B3%E5%87%A1%E7%9A%84%E4%B8%96%E7%95%8C" target="_blank" title="平凡的世界">平凡的世界</a></li><li><a href="https://quickapp.lovejade.cn/good-book-recommendation-list/#%E4%BB%A3%E7%A0%81%E5%A4%A7%E5%85%A82" target="_blank" title="代码大全2">代码大全2</a></li><li><a href="https://quickapp.lovejade.cn/good-book-recommendation-list/" target="_blank" title="查看更多 &gt;&gt;">查看更多 &gt;&gt;</a></li></ul></div><div class="rsspart"><a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a></div></aside></div></div><footer><div id="footer"><div class="line"><span></span><div class="author"></div></div><section class="info"><p>追求卓越，成功就会在不经意间 追上你！<br>As you think, so shall you become.</p></section><div class="social-font" class="clearfix"><a href="https://weibo.com/jeffjade" target="_blank" class="icon-weibo" title="微博"></a> <a href="https://github.com/nicejade" target="_blank" class="icon-github" title="github"></a> <a href="https://twitter.com/nicejadeyang" target="_blank" class="icon-twitter" title="twitter"></a> <a href="https://www.facebook.com/nice.jade.yang" target="_blank" class="icon-facebook" title="facebook"></a> <a href="mailto:yunjeff@163.com" target="_blank" class="icon-email" title="Email Me"></a> <a href="https://www.zhihu.com/people/yang-qiong-pu" target="_blank" class="icon-zhihu" title="知乎"></a></div><p class="copyright">Powered by <a href="https://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2020 <a href="https://aboutme.lovejade.cn/?utm_source=jeffjade.com" target="_blank" title="晚晴幽草轩轩主">晚晴幽草轩轩主</a></p></div></footer><script src="https://cdn.jsdelivr.net/gh/bootcdn/BootCDN/ajax/libs/echo.js/1.7.3/echo.min.js"></script><script type="text/javascript">echo.init({offset:200,throttle:250,unload:!1,callback:function(e,n){}}),$(document).ready(function(){console.log("Welcome To %c晚晴幽草轩","font-size:2.113em;color: #2edfa3"),$(".navbar").click(function(){$("header nav").toggleClass("shownav")});var e=0;function n(){"number"==typeof window.innerWidth?e=window.innerWidth:document.documentElement&&document.documentElement.clientWidth&&(e=document.documentElement.clientWidth)}var o=$("#main"),s=$("#asidepart"),a=$(".closeaside"),c=$(".openaside"),d=function(){s.addClass("fadeOut").css("display","none"),c.css("display","block").addClass("fadeIn"),o.addClass("moveMain")},t=function(){c.css("display","none").removeClass("beforeFadeIn"),s.css("display","block").removeClass("fadeOut").addClass("fadeIn"),o.removeClass("moveMain")};a.click(d),c.click(t),document.onkeydown=function(e){var n=e||window.event,o=n.keyCode||n.which||n.charCode,s="search"===document.activeElement.id||"TEXTAREA"===document.activeElement.nodeName;return!(13===o&&!s)||("none"===c.css("display")?d():t(),!1)},$(window).scroll(function(){c.css("top",Math.max(80,260-$(this).scrollTop()))}),n(),$(window).resize(function(){n(),1024<=e?$("header nav").removeClass("shownav"):(o.removeClass("moveMain"),s.css("display","block").removeClass("fadeOut"),c.css("display","none"),$("#toc.toc-aside").css("display","none"))})})</script><script type="text/javascript">$(document).ready(function(){var c=$(".article-content>iframe"),n=$(".article-content>embed"),o=($("#toc"),$("#toc.toc-aside")),e=$(".openaside"),i=$(".closeaside");0<c.length&&c.wrap('<div class="video-container" />'),0<n.length&&n.wrap('<div class="video-container" />'),i.click(function(){o.css("display","block").addClass("fadeIn")}),e.click(function(){o.css("display","none")}),$(window).scroll(function(){o.css("top",Math.max(140,320-$(this).scrollTop()))})})</script><script type="text/javascript">$(document).ready(function(){var a=$(".share"),t=a.attr("data-url"),e=encodeURIComponent(t),r=a.attr("data-title"),c=a.attr("data-tsina"),i=(a.attr("description"),['<a href="#" class="overlay" id="qrcode"></a>','<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#nothing"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="//s.jiathis.com/qrcode.php?url='+e+'"/></div>','<a href="https://www.facebook.com/sharer.php?u='+e+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="https://twitter.com/intent/tweet?url='+e+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="#qrcode" class="article-share-qrcode" title="微信"><i class="fa fa-weixin"></i></a>','<a href="//service.weibo.com/share/share.php?title='+r+"&url="+e+"&ralateUid="+c+'&searchPic=true&style=number" class="article-share-weibo" target="_blank" title="微博"></a>','<span title="Share to"></span>'].join(""));a.append(i),$(".article-share-qrcode").click(function(){var a=$("#qrcode-pic").attr("data-src");$("#qrcode-pic").attr("src",a),$("#qrcode-pic").load(function(){$(".qrcode strong").text(" ")})})})</script><link href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.6/css/jquery.fancybox.min.css" rel="stylesheet"><script async src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.6/js/jquery.fancybox.min.js"></script><script type="text/javascript">$(document).ready(function(){$(".article-content").each(function(a){$(this).find("img").each(function(){if(!$(this).parent().hasClass("fancybox")){var a=this.alt;a&&$(this).after('<span class="caption">'+a+"</span>");var t=this.src.indexOf("blank.gif")<0?this.src:$(this).attr("data-echo");$(this).wrap('<a href="'+t+'" title="'+a+'" class="fancybox"></a>')}}),$(this).find(".fancybox").each(function(){$(this).attr("rel","article"+a)})}),$.fancybox&&$(".fancybox").fancybox(),$("#reward-jade-moudle .platform-radio-box").on("click",function(a){var t=a.currentTarget.dataset.id;$(".reward-img-div .reward-qr-img").removeClass("active"),$(".reward-img-div ."+t).addClass("active"),$(".platform-radio-box").removeClass("platform-checked"),a.currentTarget.className="platform-radio-box platform-checked"})})</script><!-- Analytics Begin --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-67901984-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-67901984-1")</script><script type="text/javascript">var _bdhmProtocol="https:"==document.location.protocol?" https://":" http://";document.write(unescape("%3Cscript src='"+_bdhmProtocol+"hm.baidu.com/h.js%3Fd0ed9bb72df3b2b32bdd2274981a7d07' type='text/javascript'%3E%3C/script%3E"))</script><!-- Analytics End --><!-- Totop Begin --><div id="totop"><a title="返回顶部"><img src="https://image.nicelinks.site/blank.gif" data-echo="/img/scrollup.png"></a></div><!-- <script src="/js/totop.js"></script> --><!-- Totop End --><!-- MathJax Begin --><!-- mathjax config similar to math.stackexchange --><!-- MathJax End --><!-- Move totop.js From totop.ejs To Here@0309 --><script src="//cdnjs.cloudflare.com/ajax/libs/gitalk/1.2.2/gitalk.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.10.0/js/md5.min.js"></script><script type="text/javascript">!function(e){(Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert first argument to object");for(var c=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var a=Object.keys(Object(r)),o=0,i=a.length;o<i;o++){var s=a[o],d=Object.getOwnPropertyDescriptor(r,s);void 0!==d&&d.enumerable&&(c[s]=r[s])}}return c}}),document.getElementById("gitalk-container"))&&new Gitalk({clientID:"4bc2d1424c7939471ad4",clientSecret:"b3dc888873f473405f79f7d9394888478ba55ca4",repo:"jadeblog-backups",owner:"nicejade",admin:["nicejade"],id:md5(location.pathname),distractionFreeMode:!1}).render("gitalk-container");var t=document.getElementById("clustrmaps-count");if(t){var c=document.createElement("script");c.type="text/javascript",c.id="clustrmaps",c.src="//cdn.clustrmaps.com/map_v2.js?d=ce61c9PuAmgrudP1i8MVo2i67jS4nphALli0NtL8D_c&cl=ffffff&w=a",t.appendChild(c)}var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.charset="utf-8",n.src="//tjs.sjs.sinajs.cn/open/api/js/wb.js",document.body.appendChild(n);var r=document.createElement("script");"https"===window.location.protocol.split(":")[0]?(r.async=!0,r.src="https://zz.bdstatic.com/linksubmit/push.js"):(r.async=!0,r.src="//push.zhanzhang.baidu.com/push.js");var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);var o=e("#totop");o.hide(),e(window).scroll(function(){1e3<e(document).scrollTop()?e(o).stop().fadeTo(300,1):e(o).stop().fadeTo(300,0)}),e(o).click(function(){return e("html, body").animate({scrollTop:0},500),!1})}(jQuery)</script><!-- Inject service-worker@2018-01-09 --><script type="text/javascript">if ('serviceWorker' in navigator) {
  navigator.serviceWorker
    .register("/service-worker.js", {scope: '/'})
    .then(registration => console.log('SW Registration Success！Scope: ', registration.scope))
    .catch(err => console.log('SW Registration Failed! Error: ', err));
}</script><!-- Inject Anchor.js @2018-01-14 --><script type="text/javascript">function async(e,n){var o=document,a="script",r=o.createElement(a),s=o.getElementsByTagName(a)[0];r.src=e,n&&r.addEventListener("load",function(e){n(null,e)},!1),s.parentNode.insertBefore(r,s)}async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js",function(){anchors.options={visible:"hover",placement:"right"},anchors.add("#post h2, #post h3, #post h4"),anchors.add().remove(".intro-header h1").remove(".subheading").remove(".sidebar-container h5")})</script></body>